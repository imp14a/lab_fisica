<!DOCTYPE html>
<html>
  <head>
    <title>Laboratorio de F&iacute;sica</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    
    <link rel="stylesheet" href="css/style.css"  media="screen">    
    <link rel="stylesheet" href="css/tagtip.css" type="text/css">
    <link rel="stylesheet" href="css/slider.css" type="text/css">
    
    <script type="text/javascript" src="js/prototype.js" charset="UTF-8"></script>
    <script type="text/javascript" src="js/scriptaculous.js?load=effects"></script>
    <script type="text/javascript" src="js/scriptaculous/scriptaculous.js?load=slider"></script>
    <script type="text/javascript" src='js/Box2dWeb-2.1.a.3.min.js'></script>
    <script type="text/javascript" src="js/service.js" charset="UTF-8"></script>      
    <script type="text/javascript" src="js/tagtip.js"></script>

  </head>
  <body>
    <div id="header">
      <div id="toolbar" class="about_bar">
        <ul>
          <li class="item_bar_about">  
            <a class="krismar" href="http://www.krismar.com.mx"></a>
          </li> 
          <li class="item_bar_about">  
            <a class="help"></a>
          </li> 
        </ul>
      </div>
      <div id="toolbar" class="main_bar">
        <ul class="left_bar">
          <li class="item_bar">  
            <a id="open" class="open"></a>
          </li>  
           <li class="item_bar">  
            <a id="intro" class="intro"></a>
          </li>          
          <li class="item_bar">  
            <a id="proc" class="proc"></a>
          </li> 
           <li class="item_bar">  
            <a id="conclusion" class="conclusion"></a>
          </li>  
           <li class="item_bar">  
            <a id="print" class="print" ></a>
          </li>   
        </ul>             
        <ul class="right_bar">
          <li class="item_bar_control">  
            <a id="start" class="start"></a>
          </li>
          <li class="item_bar_control">  
            <a id="pause" class="pause"></a>
          </li>
          <li class="item_bar_control">  
            <a id="restart" class="restart"></a>
          </li>
        </ul>        
      </div>
    </div>        
    <div id="content">
      <div id="navigation">
        <p id="title">INTRODUCCI&Oacute;N</p>
        <textarea id="info" readonly=true class="text_navigation">Marco te&oacute;rico de la pr&aacute;ctica</textarea>
      </div>       
      <div id="vtoolbar">
        <ul>
          <li class="item_vbar">  
            <a id="properties" class="properties"></a>
          </li>  
           <li class="item_vbar">  
            <a id="world" class="world"></a>
          </li>          
          <li class="item_vbar">  
            <a id="monitor" class="monitor"></a>
          </li> 
           <li class="item_vbar">  
            <a id="graph" class="graph"></a>
          </li>  
          <li class="item_vbar">  
            <a id="camera" class="camera"></a>
          </li> 
          <li class="item_vbar">  
            <a id="script" class="script"></a>
          </li> 
        </ul>  
      </div>    
      <div id="simulator">
        <p id="activity_title"></p>
        <div style="text-align:center; background-image: url('css/img/grid.png');background-size: 40px; margin-left: 150px; margin-right: 150px;">
          <canvas width="100" height="100" id="canvas"  ></canvas>
        </div>
        <div class="slider" id="slider_div">
          <p>
            <label for="zoom_input">Zoom:</label>
            <input type="text" id="zoom_input" />
          </p>
          <div id="track1" class="track vertical" style="position: absolute;" >
            <div id="handle1" class="handle" ></div>
          </div>
        </div>
      </div>  
    </div>   
    <div id="footer">
      <ul class="center_bar">
        <li class="item_bar_watch">
          <label style="margin-bottom: 10px; font-size: 30px; color: white;">Tiempo:</label>
        </li>
        <li class="item_bar_watch">
          <input type="text" class="time" readonly=true placeholder="00:00:00:00"></input>
        </li>
        <li class="item_bar_watch">
          <label style="margin-bottom: 10px; font-size: 30px; color: white;">Monitor:</label>
        </li>
        <li class="item_bar_watch">
          <input type="text" class="monitor" readonly=true placeholder="POSICION  X: 0.00  Y: 0.00"></input>
        </li>
      </ul>
    </div>

    <script>
    // Esto es un script GENERICO, deberia ir en un arcivo aparte TODO
      var b2Vec2 = Box2D.Common.Math.b2Vec2
        ,    b2FixtureDef = Box2D.Dynamics.b2FixtureDef
        ,   b2PolygonShape = Box2D.Collision.Shapes.b2PolygonShape
        ,   b2BodyDef = Box2D.Dynamics.b2BodyDef
        ,   b2Body = Box2D.Dynamics.b2Body
        ,   b2Fixture = Box2D.Dynamics.b2Fixture
        ,   b2World = Box2D.Dynamics.b2World
        ,   b2MassData = Box2D.Collision.Shapes.b2MassData
        ,   b2CircleShape = Box2D.Collision.Shapes.b2CircleShape
        ,   b2DebugDraw = Box2D.Dynamics.b2DebugDraw;

       var world;
       // la proporcion es 4:3, con esto se genera un mundo inicial que dependera del zoom y la proporcion
       // el eje cordenado va de -10 a 10 en el eje 'x' y el eje 'y'
       var proportion = 1.33;
       var zoom = 80;
       var prevZoom = 80;
       var debugDraw;
       var ground;
       var gridSize=113; // 113 pixeles son 4 centimetros 
       var groundFoxture;
       // Los valores de las unidades estan dados por unidades usadas por el motor, a excepcion de los amrcados con real
       var canvasProperties = {
            realSize:{
              width:0,
              height:0
            },
            size:{
              width:0,
              height:0
            }, 
            center:{
              x:0,
              y:0
            },
            unitiValue:0 
          };

          function initCanvasInfo(){
            canvasProperties.realSize.height = $('canvas').up(1).getHeight();
            canvasProperties.realSize.width = canvasProperties.realSize.height * proportion;
            canvasProperties.unitiValue = zoom/100 ;
            canvasProperties.size.width = canvasProperties.realSize.width / zoom;
            canvasProperties.size.height = canvasProperties.realSize.height / zoom;
            canvasProperties.center.x = (canvasProperties.size.width / 2);
            canvasProperties.center.y = (canvasProperties.size.height / 2);
        }

    </script>
    <script src="http://lab_fisica/Service/pages/core/simulator.php?controller=Simulator&action=getScript">
    </script>
  </body>
</html>